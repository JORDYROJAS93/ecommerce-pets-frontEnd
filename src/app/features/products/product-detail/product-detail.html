<div class="container mt-4">
  <button class="btn btn-secondary mb-3" (click)="goBack()">
    ‚Üê Volver a productos
  </button>

  <div class="card">
    <div class="card-header">
      <h2>{{ producto?.name }}</h2>
      <p class="text-muted">{{ producto?.sku }}</p>
    </div>
    <div class="card-body">
      <p>
        <strong>Descripci√≥n corta:</strong> {{ producto?.shortDescription }}
      </p>
      <p><strong>Descripci√≥n:</strong> {{ producto?.description }}</p>
      <p>
        <strong>Precio:</strong>
        {{ producto?.price | currency : "PEN" : "symbol" }}
      </p>
      <p><strong>Peso:</strong> {{ producto?.weightGrams }} gr</p>
      <p>
        <strong>Estado:</strong>
        {{ producto?.isActive ? "Activo" : "Inactivo" }}
      </p>

      <!-- üëá VALIDACI√ìN SEGURA ANTES DE ITERAR -->
      @if (dietaryTags.length > 0) {
      <div class="mt-3">
        <h5>Etiquetas diet√©ticas:</h5>
        @for (tag of dietaryTags; track tag.id) {
        <span class="badge bg-primary me-1">{{ tag.name }}</span>
        }
      </div>
      } @else {
      <div class="mt-3">
        <h5>Etiquetas diet√©ticas:</h5>
        <p class="text-muted">No tiene etiquetas asignadas.</p>
      </div>
      }

      <div class="mt-4">
        @if (authService.isAdmin()) {
        <button class="btn btn-warning" (click)="editProduct()">
          <i class="bi bi-pencil"></i> Editar producto
        </button>
        }
      </div>
    </div>
  </div>
</div>
